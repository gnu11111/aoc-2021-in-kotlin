package at.gnu.adventofcode.year2021

class Day23(input: List<String>) {

    companion object {
        const val RESOURCE = "/adventofcode/year2021/Day23.txt"
    }

    class Amphipod(val type: Int, val slot: Int, val position: Int)

    private val amphipods = listOf(Amphipod(input[2][3] - 'A', 0, 1), Amphipod(input[3][3] - 'A', 0, 0),
        Amphipod(input[2][5] - 'A', 1, 1), Amphipod(input[3][5] - 'A', 1, 0), Amphipod(input[2][7] - 'A', 2, 1),
        Amphipod(input[3][7] - 'A', 2, 0), Amphipod(input[2][9] - 'A', 3, 1), Amphipod(input[3][9] - 'A', 3, 0))

    fun part1(): Int {
        visualizeAmphipods()

//      #############
//      #...........#
//      ###D#B#D#B###
//        #C#A#A#C#
//        #########

//      #############
//      #.....B.....#    20
//      ###D#.#D#B###    20
//        #C#A#A#C#
//        #########

//      #############
//      #.A...B.....#      5
//      ###D#.#D#B###     25
//        #C#.#A#C#
//        #########

//      #############
//      #.A.........#     30
//      ###D#.#D#B###     55
//        #C#B#A#C#
//        #########

//      #############
//      #.A.........#     60
//      ###D#B#D#.###    115
//        #C#B#A#C#
//        #########

//      #############
//      #.A.......C.#    300
//      ###D#B#D#.###    415
//        #C#B#A#.#
//        #########

//      #############
//      #.A.......C.#   9000
//      ###.#B#D#.###   9415
//        #C#B#A#D#
//        #########

//      #############
//      #.A.......C.#   4000
//      ###.#B#.#D###  13415
//        #C#B#A#D#
//        #########

//      #############
//      #.A.....A.C.#      3
//      ###.#B#.#D###  13418
//        #C#B#.#D#
//        #########

//      #############
//      #.A.....A.C.#    800
//      ###.#B#.#D###  14218
//        #.#B#C#D#
//        #########

//      #############
//      #.......A.C.#      3
//      ###.#B#.#D###  14221
//        #A#B#C#D#
//        #########

//      #############
//      #.........C.#      6
//      ###A#B#.#D###  14227
//        #A#B#C#D#
//        #########

//      #############
//      #...........#    400
//      ###A#B#C#D###  14627
//        #A#B#C#D#
//        #########

        return 14627
    }

    fun part2(): Int {

//      #############
//      #...........#
//      ###D#B#D#B###
//        #D#C#B#A#
//        #D#B#A#C#
//        #C#A#A#C#
//        #########

//      #############
//      #B..........#
//      ###D#B#D#.###      90
//        #D#C#B#A#        90
//        #D#B#A#C#
//        #C#A#A#C#
//        #########

//      #############
//      #BA.........#
//      ###D#B#D#.###       9
//        #D#C#B#.#        99
//        #D#B#A#C#
//        #C#A#A#C#
//        #########

//      #############
//      #BA........C#
//      ###D#B#D#.###     500
//        #D#C#B#.#       599
//        #D#B#A#.#
//        #C#A#A#C#
//        #########

//      #############
//      #BA.......CC#
//      ###D#B#D#.###     500
//        #D#C#B#.#      1099
//        #D#B#A#.#
//        #C#A#A#.#
//        #########

//      #############
//      #BA.......CC#
//      ###D#B#.#.###    7000
//        #D#C#B#.#      8099
//        #D#B#A#.#
//        #C#A#A#D#
//        #########

//      #############
//      #BA.......CC#
//      ###.#B#.#.###   10000
//        #D#C#B#.#     18099
//        #D#B#A#D#
//        #C#A#A#D#
//        #########

//      #############
//      #BA.......CC#
//      ###.#B#.#.###   10000
//        #.#C#B#D#     28099
//        #D#B#A#D#
//        #C#A#A#D#
//        #########

//      #############
//      #BA.......CC#
//      ###.#B#.#D###   10000
//        #.#C#B#D#     38099
//        #.#B#A#D#
//        #C#A#A#D#
//        #########

//      #############
//      #BA.....C.CC#
//      ###.#B#.#D###     900
//        #.#C#B#D#     38999
//        #.#B#A#D#
//        #.#A#A#D#
//        #########

//      #############
//      #B......C.CC#
//      ###.#B#.#D###       5
//        #.#C#B#D#     39004
//        #.#B#A#D#
//        #A#A#A#D#
//        #########

//      #############
//      #BB.....C.CC#
//      ###.#B#.#D###      70
//        #.#C#.#D#     39074
//        #.#B#A#D#
//        #A#A#A#D#
//        #########

//      #############
//      #BB.....C.CC#
//      ###.#B#.#D###      10
//        #.#C#.#D#     39084
//        #A#B#.#D#
//        #A#A#A#D#
//        #########

//      #############
//      #BB.....C.CC#
//      ###.#B#.#D###      10
//        #A#C#.#D#     39094
//        #A#B#.#D#
//        #A#A#.#D#
//        #########

//      #############
//      #BB.......CC#
//      ###.#B#.#D###     500
//        #A#C#.#D#     39594
//        #A#B#.#D#
//        #A#A#C#D#
//        #########

//      #############
//      #BB........C#
//      ###.#B#.#D###     600
//        #A#C#.#D#     40194
//        #A#B#C#D#
//        #A#A#C#D#
//        #########

//      #############
//      #BB.........#
//      ###.#B#.#D###     600
//        #A#C#C#D#     40794
//        #A#B#C#D#
//        #A#A#C#D#
//        #########

//      #############
//      #BB.....B...#
//      ###.#.#.#D###      40
//        #A#C#C#D#     40834
//        #A#B#C#D#
//        #A#A#C#D#
//        #########

//      #############
//      #BB.....B...#
//      ###.#.#C#D###     500
//        #A#.#C#D#     41334
//        #A#B#C#D#
//        #A#A#C#D#
//        #########

//      #############
//      #BB...B.B...#
//      ###.#.#C#D###      40
//        #A#.#C#D#     41374
//        #A#.#C#D#
//        #A#A#C#D#
//        #########

//      #############
//      #BB...B.B...#
//      ###A#.#C#D###       7
//        #A#.#C#D#     41381
//        #A#.#C#D#
//        #A#.#C#D#
//        #########

//      #############
//      #BB.....B...#
//      ###A#.#C#D###      50
//        #A#.#C#D#     41431
//        #A#.#C#D#
//        #A#B#C#D#
//        #########

//      #############
//      #BB.........#
//      ###A#.#C#D###      60
//        #A#.#C#D#     41491
//        #A#B#C#D#
//        #A#B#C#D#
//        #########

//      #############
//      #B..........#
//      ###A#.#C#D###      50
//        #A#B#C#D#     41541
//        #A#B#C#D#
//        #A#B#C#D#
//        #########

//      #############
//      #...........#
//      ###A#B#C#D###      50
//        #A#B#C#D#     41591
//        #A#B#C#D#
//        #A#B#C#D#
//        #########

        return 41591
    }

    private fun visualizeAmphipods() {
        println("#############\n#...........#\n###${amphipodAt(0, 1).type}#${amphipodAt(1, 1).type}#" +
                "${amphipodAt(2, 1).type}#${amphipodAt(3, 1).type}###\n  #${amphipodAt(0, 0).type}#" +
                "${amphipodAt(1, 0).type}#${amphipodAt(2, 0).type}#${amphipodAt(3, 0).type}#  \n  #########")
    }

    private fun amphipodAt(slot: Int, position: Int): Amphipod =
        amphipods.first { (it.slot == slot) && (it.position == position) }
}

fun main() {
    val input = Day23::class.java.getResource(Day23.RESOURCE)!!.readText().trim().split("\n")
    val day23 = Day23(input)
    println("Day23::part1 -> ${day23.part1()}")
    println("Day23::part2 -> ${day23.part2()}")
}
